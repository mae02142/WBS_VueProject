{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"app\"\n};\nconst _hoisted_2 = {\n  class: \"app-main\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_FullCalendar = _resolveComponent(\"FullCalendar\", true);\n  const _component_CreateProjectModal = _resolveComponent(\"CreateProjectModal\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_FullCalendar, {\n    class: \"app-calendar\",\n    options: $data.calendarOptions,\n    ref: \"cal\"\n  }, {\n    eventContent: _withCtx(arg => [_createElementVNode(\"b\", null, _toDisplayString(arg.timeText), 1 /* TEXT */), _createElementVNode(\"span\", null, _toDisplayString(arg.event.title), 1 /* TEXT */)]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"options\"]), _createVNode(_component_CreateProjectModal, {\n    visible: $data.showModal,\n    onClose: $options.closeModal,\n    onConfirm: _ctx.addTask,\n    onProjectCreated: _ctx.handleProjectCreated,\n    projectData: _ctx.selectedProject\n  }, null, 8 /* PROPS */, [\"visible\", \"onClose\", \"onConfirm\", \"onProjectCreated\", \"projectData\"])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_FullCalendar","options","$data","calendarOptions","ref","eventContent","_withCtx","arg","_toDisplayString","timeText","event","title","_component_CreateProjectModal","visible","showModal","onClose","$options","closeModal","onConfirm","_ctx","addTask","onProjectCreated","handleProjectCreated","projectData","selectedProject"],"sources":["C:\\vue_everyware\\WBS\\src\\components\\FullCalendar.vue"],"sourcesContent":["<script>\r\nimport FullCalendar from '@fullcalendar/vue3'\r\nimport dayGridPlugin from '@fullcalendar/daygrid'\r\nimport timeGridPlugin from '@fullcalendar/timegrid'\r\nimport interactionPlugin from '@fullcalendar/interaction'\r\nimport listPlugin from '@fullcalendar/list'\r\nimport CreateProjectModal from \"./CreateProjectModal.vue\";\r\nimport mixin from \"../mixin\";\r\n\r\nexport default {\r\n  mixins:[mixin],\r\n  components: {\r\n    FullCalendar,\r\n    CreateProjectModal,\r\n  },\r\n  inject: [\"eventBus\"],\r\n  props: {\r\n    todoList: [],\r\n  },\r\n  data () {\r\n    return {      \r\n      showModal: false,\r\n      calendarOptions: {\r\n        plugins: [\r\n          dayGridPlugin,\r\n          timeGridPlugin,\r\n          interactionPlugin,\r\n          listPlugin\r\n        ],\r\n        headerToolbar: {\r\n          left: 'prev,next today',\r\n          center: 'title',\r\n          right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'\r\n        },\r\n        initialView: 'dayGridMonth',\r\n        events: this.todoList, // calendar에 뿌려줄 배열\r\n        editable: false, // 일정 드래그 방지\r\n        selectable: true,\r\n        selectMirror: true,\r\n        dayMaxEvents: true,\r\n        weekends: true,\r\n        select: this.handleDateSelect,\r\n        eventClick: this.handleEventClick,\r\n        eventsSet: this.setTodoList\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    // App.vue에서 eventBUs -> getTodoList라는 이름으로 event 발생할 경우\r\n    // this.resetCalendar 실행\r\n    this.eventBus.on('getTodoList',this.resetCalendar);\r\n  },\r\n  methods: {\r\n    setTodoList() {\r\n      console.log('Calendar Todo >>>>>>>', this.todoList)\r\n      // this.calendarOptions.events = [];\r\n      // this.calendarOptions.events = this.todoList;\r\n    },\r\n\r\n    handleDateSelect(selectInfo) {\r\n      let title = prompt('일정 제목을 입력하세요')\r\n      let calendarApi = selectInfo.view.calendar\r\n\r\n      calendarApi.unselect() // clear date selection\r\n      \r\n      if (title) {\r\n        calendarApi.addEvent({\r\n          id: selectInfo.id,\r\n          title,\r\n          start: selectInfo.startStr,\r\n          end: selectInfo.endStr,\r\n          allDay: selectInfo.allDay\r\n        })\r\n      }\r\n    },\r\n    handleEventClick(clickInfo) {\r\n      if (confirm(`'${clickInfo.event.title}' 일정을 삭제하시겠습니까?`)) {\r\n        clickInfo.event.remove()\r\n      }\r\n    },\r\n    closeModal() {\r\n      this.showModal = false;\r\n    },\r\n    openModal() {\r\n      this.showModal = true;\r\n    },\r\n    resetCalendar(value){\r\n      // var dataList = value;\r\n      console.log(\"value >>>>>\", value)\r\n      this.todoList = []; // project 바뀔 때마다 todoList 초기화\r\n      // dataList.map((element) => {\r\n      //   const startDate = new Date(element.start_date);\r\n      //   startDate.setHours(0, 0, 0, 0);\r\n      //   const endDate = new Date(element.due_date);\r\n      //   endDate.setHours(0, 0, 0, 0);\r\n      //   startDate.setDate(startDate.getDate() + 1);\r\n      //   endDate.setDate(endDate.getDate() + 1);\r\n\r\n      //   this.todoList.push({\r\n      //     id: element.todo_num,\r\n      //     title: element.todo_title,\r\n      //     start: startDate.toISOString().split('T')[0],\r\n      //     end: endDate.toISOString().split('T')[0],\r\n      //     member_name: element.member_name,\r\n      //     content: element.content,\r\n      //     member_num: element.member_num \r\n      //   })\r\n      // })\r\n\r\n      this.$refs.cal.getApi().pauseRendering();\r\n      this.$refs.cal.getApi().destroy();\r\n      this.calendarOptions.events = value;\r\n      this.$refs.cal.buildOptions(this.calendarOptions);\r\n      this.$refs.cal.getApi().render();\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class='app'>\r\n    <div class='app-main'>\r\n      <FullCalendar class='app-calendar'\r\n        :options='calendarOptions'\r\n        ref=\"cal\"\r\n      >\r\n        <template v-slot:eventContent='arg'>\r\n          <b>{{ arg.timeText }}</b>\r\n          <span>{{ arg.event.title }}</span>\r\n        </template>\r\n      </FullCalendar>\r\n\r\n      <CreateProjectModal :visible=\"showModal\" \r\n      @close=\"closeModal\" @confirm=\"addTask\" \r\n      @projectCreated=\"handleProjectCreated\"\r\n      :projectData=\"selectedProject\"></CreateProjectModal>\r\n    </div> \r\n  </div>\r\n</template>\r\n\r\n<style>\r\n  @import '../assets/css/calendar.css';\r\n</style>"],"mappings":";;EAwHOA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAU;;;;uBADvBC,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBJC,mBAAA,CAeM,OAfNC,UAeM,GAdJC,YAAA,CAQeC,uBAAA;IARDN,KAAK,EAAC,cAAc;IAC/BO,OAAO,EAAEC,KAAA,CAAAC,eAAe;IACzBC,GAAG,EAAC;;IAEaC,YAAY,EAAAC,QAAA,CAAEC,GAAG,KAChCV,mBAAA,CAAyB,WAAAW,gBAAA,CAAnBD,GAAG,CAACE,QAAQ,kBAClBZ,mBAAA,CAAkC,cAAAW,gBAAA,CAAzBD,GAAG,CAACG,KAAK,CAACC,KAAK,iB;;;kCAI5BZ,YAAA,CAGoDa,6BAAA;IAH/BC,OAAO,EAAEX,KAAA,CAAAY,SAAS;IACtCC,OAAK,EAAEC,QAAA,CAAAC,UAAU;IAAGC,SAAO,EAAEC,IAAA,CAAAC,OAAO;IACpCC,gBAAc,EAAEF,IAAA,CAAAG,oBAAoB;IACpCC,WAAW,EAAEJ,IAAA,CAAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}